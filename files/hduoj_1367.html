<!DOCTYPE html><html>
				<head><meta charset=gb2312 />
				<link rel="stylesheet" type=text/css href="../style.css" />
				<script type="text/javascript" src="../js.js"></script>
				<title>Problem 1367</title></head>
				<body><div id="hduoj_c"><tr><td align=center><h1 style='color:#1A5CC8'>Parallel Expectations</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 10000/1000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 65536/32768 K (Java/Others)<br>Total Submission(s): 37&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 9<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>We are to predict some facts about the behavior of a single processor designed for running two programs in parallel. Programs are sequences of commands according to the following grammar:<br><b><br>&lt;Program&gt;   &lt;Command&gt; *<br>&lt;Command&gt;   &lt;Variable&gt; := &lt;Operand&gt; &lt;Operator&gt; &lt;Operand&gt;<br>&lt;Operator&gt;   + | - <br>&lt;Operand&gt;   &lt;Variable&gt; | &lt;Constant&gt;<br></b><br>A &lt;Variable&gt; is a sequence of (at most 20) alphanumeric characters (A...Z, a...z, and 0...9) starting with a letter (not case sensitive). A &lt;constant&gt; is an unsigned integer number (less than 100). There may be arbitrary number of blank or tab characters between tokens.<br><br>Before execution, programs are translated into machine language. A statement of the form X := Y + Z is translated to the following set of machine instructions:<br><b><br>Mov R1, Y<br>Mov R2, Z<br>Add R1, R2<br>Mov X, R1<br></b><br>A MOV instruction copies the content of its second operand into its first operand. An Add (Sub) instruction, adds (subtracts) its second operand from its first operand and the result is stored in the first operand. Note that Y and Z denote either a variable or an integer constant. Instructions generated for the command X := Y - Z is similar to the above instructions, except that Sub command is used instead of Add.<br><br>The processor is given two machine language programs and starts executing them from the first instruction. In each step, it randomly selects one of the two programs and runs the next instruction from the selected program. This continues until one program reaches its end. In this situation, the remaining instructions from the other one are executed sequentially to the end and the processor stops. It is assumed that all variables are shared between two programs, but each program has a separate register set. The goal of this program is to compute the expected final value of all variables among all possible executions of the programs. More precisely, we want to consider every possible execution of the two programs and for each variable, calculate the average of its final value in different executions. It is assumed that the initial value of all variables is zero.<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>The first line of the input file contains a single integer t (1 ¡Ü t ¡Ü 10), the number of test cases, followed by the input data for each test case. The data for each test case consists of a pair of programs. Each program is written as a sequence of consecutive lines, each line containing exactly one command. Programs end with a line containing only the word <b>END</b>. You may assume that no variable in any program is named '<b>END</b>'. There is no blank line between programs of one test case. There are at least one and at most 25 lines in each program. Total number of variables in two programs is no more than 10.<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>For each test case, the output file should contain the expected final value of all variables in alphabetical order of variable names (digits precede letters in this order). Output for different test cases should be separated by exactly one blank line. Round the numbers in the output to 4 digits after decimal point. Do not omit trailing zeros after decimal point (e.g. write 1.2000 instead of 1.2).<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">1
S := 1 + 3
END
S := S+S
END</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">3.0000</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=2001 Asia Regional Teheran&source=1&searchmode=source'> 2001 Asia Regional Teheran </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>JGShining</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=1367'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=1367'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=1367">Discuss</a> | <a href='note/note.php?pid=1367'>Note</a><br></td></tr></div></body></html>