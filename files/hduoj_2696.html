<!DOCTYPE html><html>
				<head><meta charset=gb2312 />
				<link rel="stylesheet" type=text/css href="../style.css" />
				<script type="text/javascript" src="../js.js"></script>
				<title>Problem 2696</title></head>
				<body><div id="hduoj_c"><tr><td align=center><h1 style='color:#1A5CC8'>Battle of Submarines</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 2000/1000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 16&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 11<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>A ship is on a W wide sea area. N enemy submarines numbered from 1 to N are underwater moving from west to east at  <br>depth of D. Every two seconds the submarine can move one unit distance. The ship is equipped with unlimited bombs. <br>At each second, the ship can do one of the following actions: <br>1. Move one unit. <br>2. Release a bomb, and destroy the first submarine vertically under the ship. <br>3. Do nothing. <br><img src=../../../data/images/2696.jpg> <br>At first, the ship's moving direction is from west to east. It changes its moving direction if and only if the bomb destroys a  <br>special type of submarine. <br><br>At no time can submarines overlap at each other. <br><br> <br><br>Every submarine has an important degree. Given the time each submarine enters the sea area at the most west side, and  <br>whether the submarine is the special type, please calculate the maximum sum of destroyed submarines' important degree in  <br>time [0, S] inclusive. <br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>The input consists of multiple test cases. The first line of input contains an integer T, which is the number of test cases. <br><br>The input consists of several test cases. Each test case starts with a line containing four integers W, D, N, and S. Each of  <br>the following N lines contains four integers: Gi, Si, Di, Ci. Gi indicates the important degree of i-th submarine; Si is the  <br>time the i-th enters the sea area at the most west side; Di is the submarine's depth. If Ci is 1 then the submarine is the  <br>special type, otherwise it is a normal one. <br><br>[Technical Specification] <br>T is an integer, and T &lt;= 50. <br>W, D are integers, and 1 &lt;= W, D &lt;= 3. <br>N is an integer, and 1 &lt;= N &lt;= 30. <br>S is an integer, and 1 &lt;= S &lt;= 30. <br>Gi is an integer, and -1000 &lt;= Gi &lt;= 1000. <br>Si is an integer, and 0 &lt;= Si &lt;= S, <br>Di is an integer, and 1 &lt;= Di &lt;= D. <br>Ci is an integer, and Ci = 0 or 1. </div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>For each test case, print a single line containing a number indicating the maximum sum. </div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">2 
3 3 4 3 
10 1 1 0 
10 1 2 0 
10 1 3 0 
50 3 3 0 
3 3 2 3 
10 3 1 0 
-10 0 1 0 </div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">70 
10 </div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=The 4th Baidu Cup Central China Invitational Programming Contest&source=1&searchmode=source'> The 4th Baidu Cup Central China Invitational Programming Contest </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>yifenfei</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=2696'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=2696'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=2696">Discuss</a> | <a href='note/note.php?pid=2696'>Note</a><br></td></tr></div></body></html>