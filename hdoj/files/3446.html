<!DOCTYPE html><html><head><link rel="stylesheet" type=text/css href="../style.css" /><title>Problem 3446</title></head><body><div id="content"><tr><td align=center><h1 style='color:#1A5CC8'>daizhenyang's chess</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 2000/1000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 177&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 93<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>As we know,daizhenyang likes playing chess,but he always lose,so one day,he invented a brand new chess game with the new rule.<br><br>The game is played on a chessboard with R rows and C columns, for a total of RC squares. Some of these squares are considered unlucky,so the chessman can't be moved to there.<br>The rule of this game is simple,diffrent from traditional chess,there is only a King on the chessboard beacuse daizhenyang thinks various chessmans leads to complex rule which makes poor daizhenyang hard to understand.<br>Also daizhenyang want's make the only chessman more powerful in order to become more unbeatable,The King is no longer the traditional weak king,it integrates the power of Guard,bishop,pawn,as well as knight.And the move range is not confined.It can move to anywhere which is considered lucky. So, according to the graph, the red king can move to 20 adjacent places.<br><center><img src=../../data/images/3446-1.jpg></center> <br>And the aim of this game is simple too,The so-called King is placed in a random square of the chessboard which is considered lucky.Two players move the King alternately,in any move,the destination square must not be unlucky,and the king must never have been in the destination square before,which will causes dead loops.The first people who can't do a valid move lose.<br>daizhenyang is playing chess with another people,who is too shy to told his name.And daizhenyang moves first,he asks you--the genius programmer,for help.<br>please write a program to judge whether daizhenyang will win.Assume both player will play optimally.<br><br>The first line of input gives the number of cases, N.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>N test cases follow. The first line of each case will contain two integers, R and C. The next R lines will contain strings of length C, representing the C squares of each row.(1&lt;=R,C&lt;=15) Each string will contain only the characters '.', '#' and 'K':<br>'#' means the square is considered unlucky;<br>'.' means the square is considered lucky, and unoccupied; and<br>'K' means the king is in that square at the beginning of the game.<br>There will be only one 'K' character in each test case.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>For each test case, output one line containing &quot;Case #X: &quot; (where X is the case number, starting from 1) followed by &quot;daizhenyang win&quot; if daizhenyang wins, or &quot;daizhenyang lose&quot; if daizhenyang lose.<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">2
2 2
K.
.#

4 2
K#
.#
.#
.#</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">Case #1: daizhenyang lose
Case #2: daizhenyang win
<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>In case 1,daizhenyang can do 2 choices,but no matter what he choose,the opponent will move to another,which makes daizhenyang unable to move.
In case 2,daizhenyang moves down,opponent moves down,daizhenyang moves down,he win!
</div><i style='font-size:1px'> </i></div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=2010 ACM-ICPC Multi-University Training Contest£¨2£©¡ª¡ªHost by BUPT&source=1&searchmode=source'> 2010 ACM-ICPC Multi-University Training Contest£¨2£©¡ª¡ªHost by BUPT </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>zhouzeyong</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=3446'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=3446'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=3446">Discuss</a> | <a href='note/note.php?pid=3446'>Note</a><br></td></tr></div></body></html>