<!DOCTYPE html><html><head><link rel="stylesheet" type=text/css href="../style.css" /><title>Problem 3533</title></head><body><div id="content"><tr><td align=center><h1 style='color:#1A5CC8'>Escape</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 20000/10000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 65&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 27<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>The students of the HEU are maneuvering for their military training.<br>The red army and the blue army are at war today. The blue army finds that Little A is the spy of the red army, so Little A has to escape from the headquarters of the blue army to that of the red army. The battle field is a rectangle of size m*n, and the headquarters of the blue army and the red army are placed at (0, 0) and (m, n), respectively, which means that Little A will go from (0, 0) to (m, n). The picture below denotes the shape of the battle field and the notation of directions that we will use later.<br><br><center><img src=../../data/images/3533-1.jpg></center> <br><br>The blue army is eager to revenge, so it tries its best to kill Little A during his escape. The blue army places many castles, which will shoot to a fixed direction periodically. It costs Little A one unit of energy per second, whether he moves or not. If he uses up all his energy or gets shot at sometime, then he fails. Little A can move north, south, east or west, one unit per second. Note he may stay at times in order not to be shot.<br>To simplify the problem, let¡¯s assume that Little A cannot stop in the middle of a second. He will neither get shot nor block the bullet during his move, which means that a bullet can only kill Little A at positions with integer coordinates. Consider the example below. The bullet moves from (0, 3) to (0, 0) at the speed of 3 units per second, and Little A moves from (0, 0) to (0, 1) at the speed of 1 unit per second. Then Little A is not killed. But if the bullet moves 2 units per second in the above example, Little A will be killed at (0, 1).<br>Now, please tell Little A whether he can escape.<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>For every test case, the first line has four integers, m, n, k and d (2&lt;=m, n&lt;=100, 0&lt;=k&lt;=100, m+ n&lt;=d&lt;=1000). m and n are the size of the battle ground, k is the number of castles and d is the units of energy Little A initially has. The next k lines describe the castles each. Each line contains a character c and four integers, t, v, x and y. Here c is ¡®N¡¯, ¡®S¡¯, ¡®E¡¯ or ¡®W¡¯ giving the direction to which the castle shoots, t is the period, v is the velocity of the bullets shot (i.e. units passed per second), and (x, y) is the location of the castle. Here we suppose that if a castle is shot by other castles, it will block others¡¯ shots but will NOT be destroyed. And two bullets will pass each other without affecting their directions and velocities.<br>All castles begin to shoot when Little A starts to escape.<br>Proceed to the end of file.<br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>If Little A can escape, print the minimum time required in seconds on a single line. Otherwise print ¡°Bad luck!¡± without quotes.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">4 4 3 10
N 1 1 1 1
W 1 1 3 2
W 2 1 2 4
4 4 3 10
N 1 1 1 1
W 1 1 3 2
W 1 1 2 4</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">9
Bad luck!</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=2010 ACM-ICPC Multi-University Training Contest£¨10£©¡ª¡ªHost by HEU&source=1&searchmode=source'> 2010 ACM-ICPC Multi-University Training Contest£¨10£©¡ª¡ªHost by HEU </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>zhouzeyong</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=3533'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=3533'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=3533">Discuss</a> | <a href='note/note.php?pid=3533'>Note</a><br></td></tr></div></body></html>