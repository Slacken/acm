<!DOCTYPE html><html><head><link rel="stylesheet" type=text/css href="../style.css" /><title>Problem 3727</title></head><body><div id="content"><tr><td align=center><h1 style='color:#1A5CC8'>Jewel</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 10000/5000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 246&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 45<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>Jimmy wants to make a special necklace for his girlfriend. He bought many beads with various sizes, and no two beads are with the same size. Jimmy can't remember all the details about the beads, for the necklace is so long. So he turns to you for help.<br><br>Initially, there is no bead at all, that is, there is an empty chain. Jimmy always sticks the new bead to the right of the chain, to make the chain longer and longer. We number the leftmost bead as Position 1, and the bead to its right as Position 2, and so on. Jimmy usually asks questions about the beads' positions, size ranks and actual sizes. Specifically speaking, there are 4 kinds of operations you should process:<br><br>Insert x <br>Put a bead with size x to the right of the chain (0 &lt; x &lt; 231, and x is different from all the sizes of beads currently in the chain)<br>Query_1 s t k <br>Query the k-th smallest bead between position s and t, inclusive. You can assume 1 &lt;= s &lt;= t &lt;= L, (L is the length of the current chain), and 1 &lt;= k &lt;= min (100, t-s+1)<br>Query_2 x<br>Query the rank of the bead with size x, if we sort all the current beads by ascent order of sizes. The result should between 1 and L (L is the length of the current chain)<br>Query_3 k<br>Query the size of the k-th smallest bead currently (1 &lt;= k &lt;= L, L is the length of the current chain)<br><br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>There are several test cases in the input. The first line for each test case is an integer N, indicating the number of operations. Then N lines follow, each line contains one operation, as described above. <br><br>You can assume the amount of &quot;Insert&quot; operation is no more than 100000, and the amounts of &quot;Query_1&quot;, &quot;Query_2&quot; and &quot;Query_3&quot; are all less than 35000.<br>There are several test cases in the input. The first line for each test case is an integer N, indicating the number of operations. Then N lines follow, each line contains one operation, as described above. <br><br>You can assume the amount of &quot;Insert&quot; operation is no more than 100000, and the amounts of &quot;Query_1&quot;, &quot;Query_2&quot; and &quot;Query_3&quot; are all less than 35000.Query the rank of the bead with size x, if we sort all the current beads by ascent order of sizes. The result should between 1 and L (L is the length of the current chain)<br>Query_3 k<br>Query the size of the k-th smallest bead currently (1 &lt;= k &lt;= L, L is the length of the current chain)<br><br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>Output 4 lines for each test case. The first line is &quot;Case T:&quot;, where T is the id of the case. The next 3 lines indicate the sum of results for Query_1, Query_2 and Query_3, respectively. <br><br></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">10
Insert 1
Insert 4
Insert 2
Insert 5
Insert 6
Query_1 1 5 5</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">Case 1:
10
3
5

<div style='font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px'><div style='font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed'><i>Hint</i></div>The answers for the 5 queries are 6, 4, 3, 4, 1, respectively.</div><i style='font-size:1px'> </i></div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=2010 Asia Tianjin Regional Contest&source=1&searchmode=source'> 2010 Asia Tianjin Regional Contest </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>zhouzeyong</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=3727'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=3727'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=3727">Discuss</a> | <a href='note/note.php?pid=3727'>Note</a><br></td></tr></div></body></html>