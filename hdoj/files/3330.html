<!DOCTYPE html><html><head><link rel="stylesheet" type=text/css href="../style.css" /><title>Problem 3330</title></head><body><div id="content"><tr><td align=center><h1 style='color:#1A5CC8'>Here¡¯s a Product Which Will Make You Tensor</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 4000/2000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 190&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 68<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>Most people are familiar with how to multiply two matrices together. However, an alternate form of multiplication known as tensor multiplication exists as well, and works more like you would expect matrix multiplication should. Let <i>A</i> be a <i>p</i> ¡Á <i>q</i> matrix and <i>B</i> be an <i>n</i> ¡Á<i> m</i> matrix, where neither <i>A</i> nor <i>B</i> is a 1 ¡Á 1 matrix. Then the tensor product  <img src=../../../data/images/C272-1006-1.JPG>  is a <i>pn</i> ¡Á <i>qm</i> matrix formed by replacing each element <i>a<sub>ij</sub></i> in A with the matrix (<i>a<sub>ij</sub></i>) ¡¤ <i>B</i>. Two examples are shown below, which also demonstrate that, like normal matrix multiplication, tensor multiplication is non-commutative:<br><br><center><img src=../../../data/images/C272-1006-2.JPG></center><br>Note that there is no restriction that the number of columns in the first matrix must equal the number of rows in the second, as there is with normal matrix multiplication. The object of this problem is to determine the number of ways (if any) a given matrix can be formed as a result of a tensor multiplication.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>The first line of input for a test case will contain two positive integers <i>r</i> and <i>c</i> indicating the number of rows and columns in the matrix. After this will follow <i>r</i> lines each containing <i>c</i> positive integers. The values of <i>r</i> and <i>c</i> will be ¡Ü 500, each entry in the matrix will be no greater than 65,536, and the last test case is followed by a line containing 0 0.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>For each test case, output the number of different ways the matrix could be the tensor product of two positive integer matrices, neither of which is a 1 ¡Á 1 matrix.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">6 6
1 1 1 2 2 2
1 1 1 2 2 2
1 1 2 2 2 4
3 3 3 4 4 4
3 3 3 4 4 4
3 3 6 4 4 8
2 2
3 6
4 9
2 4
15 18 30 36
20 24 40 48
0 0</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">1
0
4</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=East Central North America 2009&source=1&searchmode=source'> East Central North America 2009 </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>teddy</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=3330'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=3330'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=3330">Discuss</a> | <a href='note/note.php?pid=3330'>Note</a><br></td></tr></div></body></html>