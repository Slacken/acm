<!DOCTYPE html><html><head><link rel="stylesheet" type=text/css href="../style.css" /><title>Problem 2358</title></head><body><div id="content"><tr><td align=center><h1 style='color:#1A5CC8'>Another Version of the Truth</h1><font><b><span style='font-family:Arial;font-size:12px;font-weight:bold;color:green'>Time Limit: 9000/3000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 116&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 45<br></span></b></font><br><br><div class=panel_title align=left>Problem Description</div> <div class=panel_content>Influence is a board game; while it can be played on almost any layout, an interesting layout is a hexagonal NxN grid, such that the layout resembles<br>a rhombus.<br><br>An example 9x9 board is as follows:<br><pre><br>1 2 3 4 5 6 7 8 9<br> \ \ \ \ \ \ \ \ \<br>  * * * * * * * * * ― A<br>   * * * * * * * * * ― B<br>    * * * * * * * * * ― C<br>     * * * * * * * * * ― D<br>      * * * * * * * * * ― E<br>       * * * * * * * * * ― F<br>        * * * * * * * * * ― G<br>         * * * * * * * * * ― H<br>          * * * * * * * * * ― I<br></pre><br>On the above grid, F5 is adjacent to F4, F6, E5, E6, G4, and G5. (These coordinates are not used in the problem, but are useful for understanding the<br>underlying adjacencies.)<br><br>The rules of Influence are simple; the pertinent details are as follows:<br><br>Players take turns placing Manipulators on the board. Manipulators occupy a single location, and there may be at most one Manipulator at a<br>location. If there is no empty location on the board to place a piece, the player must pass their turn.<br>Each player has a certain amount of Influence. A player has a single point of Influence for every location on the board that is strictly closer to<br>one of their Manipulators than a Manipulator of any other player. This is not &quot;straight-line&quot; distance, but the number of cells in a minimal path<br>to a Manipulator. On the above grid, the cell F5 is 2 steps away from G6, 1 step away from G5, and 0 steps away from itself.<br>The player with the most Influence at the end of the game wins.<br><br>In the sample input below, the first player (represented by &quot;!&quot; marks) has only two Influence, that provided by the locations that his Manipulators are<br>on; the second player (represented by &quot;@&quot; signs) has ten Influence, and the third player (represented by &quot;#&quot; marks) has four Influence. There are<br>nine locations that provide Influence to no player, as they are equally distant from two or more of the players.<br><br>Given a particular board layout, answer this question: what would the resulting Influence be for each player's optimal move if they were making the<br>last move in the game?<br><br>Moves are to be considered independently; that is, the maximum score for the second player should be calculated based on the original board layout,<br>not the one after the first player's best move.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Input</div> <div class=panel_content>Input to this problem will begin with a line containing a single integer N (1 ≤ N ≤ 100) indicating the number of data sets. Each data set consists of<br>the following components:<br><br>A line containing a single integer P (2 ≤ P ≤ 4) indicating the number of players in the game;<br>A line containing a single integer D (1 ≤ D ≤ 26) indicating the board's dimension (9 would represent the 9x9 board above); and<br>A series of D lines, each representing a row on the board from top to bottom. Each location on the row is represented by one of the following<br>characters, separated by spaces:<br>. ― An empty location;<br>! ― A piece for the first player;<br>@ ― A piece for the second player;<br># ― A piece for the third player (if playing); or<br>$ ― A piece for the fourth player (if playing).<br>Note that there may be extra whitespace on these lines (and only these lines). This is to make the input resemble the layout shown above.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Output</div> <div class=panel_content>For each data set in the input, output the heading &quot;DATA SET #K&quot; where K is 1 for the first data set, 2 for the second, etc. Then print P lines, each<br>representing the maximum score possible for, in order, the first, second, third (if playing), and fourth (if playing) player if they were to make a single<br>last move.</div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Input</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">1
3
5
! . . # .
 . @ . . !
  . . . . #
   . . @ . .
    . . . . .</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Sample Output</div><div class=panel_content><pre><div style="font-family:Courier New,Courier,monospace;">DATA SET #1
5
13
7</div></pre></div><div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Source</div> <div class=panel_content> <a href='/search.php?field=problem&key=HDU 2008'8 公开赛（非原创）&source=1&searchmode=source'> HDU 2008'8 公开赛（非原创） </a> </div> <div class=panel_bottom>&nbsp;</div><br><div class=panel_title align=left>Recommend</div> <div class=panel_content>lcy</div><div class=panel_bottom>&nbsp;</div><br><center style='font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8'><a href='statistic.php?pid=2358'>Statistic</a>&nbsp;|&nbsp;<a href='submit.php?pid=2358'>Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=2358">Discuss</a> | <a href='note/note.php?pid=2358'>Note</a><br></td></tr></div></body></html>